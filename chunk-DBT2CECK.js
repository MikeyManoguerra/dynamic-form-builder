import{a as b,c as w,d as C}from"./chunk-5W56LDU2.js";import"./chunk-3FBBUYQY.js";import{a as F}from"./chunk-OTCIFY7T.js";import{g,l as y}from"./chunk-FVNLDTLF.js";import"./chunk-WXI33M2S.js";import{B as u,Ka as c,L as m,La as n,S as l,ab as p,eb as d,fb as S,m as s,mb as h,x as f,zb as v}from"./chunk-CVXYIMTF.js";function _(){return{questions:[],slug:"",title:""}}var L=(()=>{let e=class e{constructor(i,t,o){this.formsStateService=i,this.toast=t,this.router=o,this.form$=s(_())}handleSubmit({form:i}){let t=b(i,"title"),o=i.title.value;this.formsStateService.slugInUse(t).pipe(u(1),m(r=>r&&this.toast.notify("Slug already in use!")),f(r=>!r),m(()=>{this.formsStateService.addForm({slug:t,title:o,questions:[]}),this.router.navigate(["/forms",t,"edit"])})).subscribe()}};e.\u0275fac=function(t){return new(t||e)(n(y),n(C),n(g))},e.\u0275cmp=l({type:e,selectors:[["new-form-page"]],standalone:!0,features:[v],decls:2,vars:2,consts:[[3,"isNew","form$","handleSubmit"]],template:function(t,o){t&1&&(d(0,"default-layout")(1,"form-metadata-form",0),h("handleSubmit",function(I){return o.handleSubmit(I)}),S()()),t&2&&(c(),p("isNew",!0)("form$",o.form$))},dependencies:[F,w],encapsulation:2});let a=e;return a})();export{L as NewFormPageComponent};
